{% extends "base.twig" %}

{% block title %}
    E-commerce | Cart
{% endblock title %}

{% block main %}
    <h3 class="text-center">Cart</h3>
    <section class="row rounded shadow p-3 p-lg-4 products">        
        {% if error_message is defined %}
            <figure>
                <img src="/images/empty_cart.webp" alt="empty cart">
            </figure>            
        {% else %}            
            <div class="row mb-3">
                <div class="col-12 text-end">
                    <a href="/cart/clear"><img height="40" src="/images/trash.webp" alt="empty cart"></a>                                  
                </div>                
                <div class="col-12 col-xl-9 mx-auto">                    
                    {% for product in products %}
                    <hr>
                    <form class="col-12" action="/cart/update/{{ product.id }}" method="post">
                        <div class="col-12 mb-2 m-md-0 col-md-1 d-inline-block text-center">
                            <a href="/products/show/{{ product.id }}"><img class="cart-items p-1" src="{{ product.image }}" alt="Product {{ product.id }}"></a>
                        </div>
                        <div class="col-12 mb-2 m-md-0 col-md-3 col-lg-3 d-inline-block text-center">
                            {{ product.name }}
                        </div>
                        <div class="col-12 mb-2 m-md-0 col-md-1 d-inline-block text-center">
                            {% set currency = "â‚¬" %}{{ product.price ~ "%s"|format(currency) }}
                        </div>
                        <div class="col-12 mb-4 m-md-0 col-md-2 d-inline-block text-center">
                            <input class="form-control" type="number" name="qty" value="{{ product.qty }}" min="0">
                        </div>                                    
                        <div class="col-12 mb-2 m-md-0 col-md-4 d-inline-block text-center">
                            <a class="btn btn-outline-danger" href="/cart/remove/{{ product.id }}">Delete</a>
                            <input class="btn btn-outline-success" type="submit" value="Update">
                        </div>
                    </form>                    
                    {% endfor %}
                    <hr>
                </div>                         
            </div>            
        {% endif %}        
    </section>
{% endblock main %}